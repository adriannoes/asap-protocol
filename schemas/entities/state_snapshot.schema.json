{
  "additionalProperties": false,
  "description": "First-class state persistence mechanism.\n\nStateSnapshots enable task state to be saved and restored,\naddressing a key limitation in other agent protocols. Supports\nversioning and checkpoint flagging for important states.\n\nAttributes:\n    id: Unique snapshot identifier (ULID format)\n    task_id: ID of the task this snapshot belongs to\n    version: Snapshot version number (auto-incremented)\n    data: Arbitrary state data (JSON-serializable dict)\n    checkpoint: Whether this is a significant checkpoint (default: False)\n    created_at: When the snapshot was created (UTC)\n\nExample:\n    >>> from datetime import datetime, timezone\n    >>> snapshot = StateSnapshot(\n    ...     id=\"snap_01HX5K7R...\",\n    ...     task_id=\"task_01HX5K4N...\",\n    ...     version=3,\n    ...     data={\"search_completed\": True, \"sources_analyzed\": 15},\n    ...     checkpoint=True,\n    ...     created_at=datetime.now(timezone.utc)\n    ... )",
  "properties": {
    "id": {
      "description": "Unique snapshot identifier (ULID)",
      "title": "Id",
      "type": "string"
    },
    "task_id": {
      "description": "Parent task ID",
      "title": "Task Id",
      "type": "string"
    },
    "version": {
      "description": "Snapshot version number",
      "minimum": 1,
      "title": "Version",
      "type": "integer"
    },
    "data": {
      "additionalProperties": true,
      "description": "State data (JSON-serializable)",
      "title": "Data",
      "type": "object"
    },
    "checkpoint": {
      "default": false,
      "description": "Whether this is a significant checkpoint",
      "title": "Checkpoint",
      "type": "boolean"
    },
    "created_at": {
      "description": "Creation timestamp (UTC)",
      "format": "date-time",
      "title": "Created At",
      "type": "string"
    }
  },
  "required": [
    "id",
    "task_id",
    "version",
    "data",
    "created_at"
  ],
  "title": "StateSnapshot",
  "type": "object"
}