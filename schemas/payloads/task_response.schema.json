{
  "$defs": {
    "TaskMetrics": {
      "additionalProperties": false,
      "description": "TaskResponse.metrics (extra allowed).",
      "properties": {
        "duration_ms": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Execution duration in milliseconds",
          "title": "Duration Ms"
        },
        "tokens_in": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Input token count",
          "title": "Tokens In"
        },
        "tokens_out": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Output token count",
          "title": "Tokens Out"
        },
        "tokens_used": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Total tokens (fallback for tokens_out)",
          "title": "Tokens Used"
        },
        "api_calls": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Number of API calls",
          "title": "Api Calls"
        }
      },
      "title": "TaskMetrics",
      "type": "object"
    },
    "TaskStatus": {
      "description": "Task lifecycle states.\n\nTasks progress through these states during their lifecycle.\nTerminal states are: COMPLETED, FAILED, CANCELLED.\n\nExample:\n    >>> TaskStatus.COMPLETED.is_terminal()\n    True\n    >>> TaskStatus.WORKING.is_terminal()\n    False",
      "enum": [
        "submitted",
        "working",
        "completed",
        "failed",
        "cancelled",
        "input_required"
      ],
      "title": "TaskStatus",
      "type": "string"
    }
  },
  "additionalProperties": false,
  "description": "Response to a task execution request.\n\nTaskResponse provides the final result of task execution, including\nstatus, result data, final state snapshot, and execution metrics.\n\nAttributes:\n    task_id: ID of the completed task\n    status: Final task status (completed, failed, cancelled, etc.)\n    result: Optional result data (summary, artifacts, etc.)\n    final_state: Optional final state snapshot\n    metrics: Optional execution metrics (duration, tokens used, etc.)",
  "properties": {
    "task_id": {
      "description": "Task identifier",
      "title": "Task Id",
      "type": "string"
    },
    "status": {
      "$ref": "#/$defs/TaskStatus",
      "description": "Final task status"
    },
    "result": {
      "anyOf": [
        {
          "additionalProperties": true,
          "type": "object"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Result data (summary, artifacts, etc.)",
      "title": "Result"
    },
    "final_state": {
      "anyOf": [
        {
          "additionalProperties": true,
          "type": "object"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Final state snapshot",
      "title": "Final State"
    },
    "metrics": {
      "anyOf": [
        {
          "$ref": "#/$defs/TaskMetrics"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Execution metrics (duration, tokens, etc.)"
    }
  },
  "required": [
    "task_id",
    "status"
  ],
  "title": "TaskResponse",
  "type": "object"
}